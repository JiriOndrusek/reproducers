# Batch script to add and configure the quickstart-domain security domain in the JBoss server

# Add and configure the security domain, then add the UsersRoles JAAS LoginModule.
/subsystem=security/security-domain=idp:add(cache-type=default)
/subsystem=security/security-domain=idp/authentication=classic:add
/subsystem=security/security-domain=idp/authentication=classic/login-module=UsersRoles:add(code=UsersRoles,flag=required,module-options=[usersProperties=users.properties,rolesProperties=roles.properties])


# Add and configure the security domain, then add the PicketLink SAML2LoginModule. Which wil be used to extract user's information from the SAML Assertion and authenticate the user.
/subsystem=security/security-domain=sp:add(cache-type=default)
/subsystem=security/security-domain=sp/authentication=classic:add
/subsystem=security/security-domain=sp/authentication=classic/login-module=org.picketlink.identity.federation.bindings.jboss.auth.SAML2LoginModule:add(code=org.picketlink.identity.federation.bindings.jboss.auth.SAML2LoginModule,flag=required)


# Reload the server configuration
reload



/system-property=plink.IDPurl:add(value=http://localhost:8080/idp/)
/system-property=plink.SPurl:add(value=http://localhost:8080/sales-post/)
/system-property=plink.SPLogOutUrl:add(value=http://localhost:8080/logout/)
reload